{
  "name": "mongo-product_catalog-connector",
  "config": {
    "connector.class": "com.mongodb.kafka.connect.MongoSinkConnector",

    "connection.uri": "mongodb://${MONGO_HOST}:${MONGO_PORT}/?replicaSet=${MONGO_REPLICA_SET}",
    "database": "${MONGO_DATABASE}",
    "collection": "product_catalog",

    "tasks.max": "1",
    "topics": "ksql_view_product_catalog",

    "key.converter": "org.apache.kafka.connect.storage.StringConverter",
    "key.converter.schemas.enable": false,

    "value.converter": "io.apicurio.registry.utils.converter.AvroConverter",
    "value.converter.apicurio.registry.url": "http://apicurio:8080/apis/registry/v2",
    "value.converter.apicurio.registry.auto-register": true,
    "value.converter.apicurio.registry.find-latest": true,
    "value.converter.apicurio.registry.use-id": "globalId",
    "value.converter.apicurio.registry.headers.enabled": false,
    "value.converter.apicurio.registry.as-confluent": true,

    "document.id.strategy": "com.mongodb.kafka.connect.sink.processor.id.strategy.ProvidedInKeyStrategy",

    "transforms": "KeyToStruct,ExtractNewRecordState",

    "transforms.KeyToStruct.type": "org.apache.kafka.connect.transforms.HoistField\u0024Key",
    "transforms.KeyToStruct.field": "_id",

    "transforms.ExtractNewRecordState.type": "io.debezium.transforms.ExtractNewRecordState",
    "transforms.ExtractNewRecordState.drop.tombstones": true
  }
}
